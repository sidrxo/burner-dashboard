(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{14186:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},17951:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},28883:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},35695:(e,s,a)=>{"use strict";var t=a(18999);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})},54144:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>R});var t=a(95155),r=a(93161),n=a(89852),c=a(82714),l=a(97168),i=a(88482),d=a(16559),o=a(99840),u=a(88145),h=a(98915),x=a(45404),m=a(56671),p=a(12115),g=a(35695),j=a(19946);let y=(0,j.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var f=a(17951),w=a(75525);let v=(0,j.A)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var N=a(28883),k=a(14186);let b=(0,j.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),A=(0,j.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),C=(0,j.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),S=(0,j.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var M=a(54786);function R(){var e;let s=(0,g.useRouter)(),{user:a}=(0,M.A)(),[j,R]=(0,p.useState)(h.j.currentUser),[z,P]=(0,p.useState)(""),[E,L]=(0,p.useState)(""),[Z,_]=(0,p.useState)(""),[J,O]=(0,p.useState)(!1),[U,$]=(0,p.useState)(!1),[B,q]=(0,p.useState)(!1),[H,T]=(0,p.useState)(!1),[V,F]=(0,p.useState)(!1);(0,p.useEffect)(()=>h.j.onAuthStateChanged(e=>{R(e)}),[]);let G=async()=>{if((z?E?E!==Z?(m.oR.error("New passwords don't match"),!1):!(E.length<6)||(m.oR.error("Password must be at least 6 characters"),!1):(m.oR.error("New password is required"),!1):(m.oR.error("Current password is required"),!1))&&j){O(!0);try{let e=x.IX.credential(j.email,z);await (0,x.kZ)(j,e),await (0,x.f3)(j,E),m.oR.success("Password updated successfully"),P(""),L(""),_(""),F(!1)}catch(s){let e="Password update failed";switch(s.code){case"auth/wrong-password":e="Current password is incorrect";break;case"auth/requires-recent-login":e="Please sign out and sign in again before changing password";break;case"auth/weak-password":e="Password is too weak";break;default:e=s.message||"An error occurred"}m.oR.error(e)}finally{O(!1)}}},I=async()=>{try{await (0,x.CI)(h.j),m.oR.success("Signed out successfully"),s.replace("/login")}catch(e){m.oR.error("Failed to sign out")}},D=(()=>{if(!a)return{title:"User",variant:"secondary",icon:y};switch(a.role){case"siteAdmin":return{title:"Site Administrator",variant:"default",icon:f.A};case"venueAdmin":return{title:"General Manager",variant:"secondary",icon:w.A};case"subAdmin":return{title:"Administrator",variant:"outline",icon:v};default:return{title:"User",variant:"secondary",icon:y}}})(),W=D.icon;return j?(0,t.jsx)(r.A,{children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Account Settings"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your account settings and security preferences"})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(y,{className:"h-5 w-5"}),"Account Information"]}),(0,t.jsx)(i.BT,{children:"View your account details and role information"})]}),(0,t.jsx)(i.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(c.J,{className:"text-muted-foreground",children:"Email Address"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:j.email})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(c.J,{className:"text-muted-foreground",children:"Account Type"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(u.E,{variant:D.variant,className:"gap-1",children:[(0,t.jsx)(W,{className:"h-3 w-3"}),D.title]})})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(c.J,{className:"text-muted-foreground",children:"User ID"}),(0,t.jsx)("p",{className:"font-mono text-xs bg-muted px-2 py-1 rounded",children:j.uid})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(c.J,{className:"text-muted-foreground",children:"Account Created"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(k.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:(e=j.metadata.creationTime||null)?new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown"})]})]})]})})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(b,{className:"h-5 w-5"}),"Security Settings"]}),(0,t.jsx)(i.BT,{children:"Manage your account security and password"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(o.lG,{open:V,onOpenChange:F,children:[(0,t.jsx)(o.zM,{asChild:!0,children:(0,t.jsxs)(l.$,{variant:"outline",className:"gap-2",children:[(0,t.jsx)(b,{className:"h-4 w-4"}),"Change Password"]})}),(0,t.jsxs)(o.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(o.c7,{children:[(0,t.jsx)(o.L3,{children:"Change Password"}),(0,t.jsx)(o.rr,{children:"Enter your current password and choose a new one. Your password must be at least 6 characters long."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"current-password",children:"Current Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.p,{id:"current-password",type:U?"text":"password",value:z,onChange:e=>P(e.target.value),placeholder:"Enter your current password"}),(0,t.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>$(!U),children:U?(0,t.jsx)(A,{className:"h-4 w-4"}):(0,t.jsx)(C,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"new-password",children:"New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.p,{id:"new-password",type:B?"text":"password",value:E,onChange:e=>L(e.target.value),placeholder:"Enter your new password"}),(0,t.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>q(!B),children:B?(0,t.jsx)(A,{className:"h-4 w-4"}):(0,t.jsx)(C,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"confirm-password",children:"Confirm New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.p,{id:"confirm-password",type:H?"text":"password",value:Z,onChange:e=>_(e.target.value),placeholder:"Confirm your new password"}),(0,t.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>T(!H),children:H?(0,t.jsx)(A,{className:"h-4 w-4"}):(0,t.jsx)(C,{className:"h-4 w-4"})})]})]})]}),(0,t.jsxs)(o.Es,{children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>{P(""),L(""),_("")},disabled:J,children:"Reset"}),(0,t.jsx)(l.$,{onClick:G,disabled:J,children:J?"Updating...":"Update Password"})]})]})]})})]}),(0,t.jsxs)(i.Zp,{className:"border-destructive/50",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)(S,{className:"h-5 w-5"}),"Sign Out"]}),(0,t.jsx)(i.BT,{children:"Sign out of your account"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(d.Lt,{children:[(0,t.jsx)(d.tv,{asChild:!0,children:(0,t.jsxs)(l.$,{variant:"destructive",children:[(0,t.jsx)(S,{className:"mr-2 h-4 w-4"}),"Sign Out"]})}),(0,t.jsxs)(d.EO,{children:[(0,t.jsxs)(d.wd,{children:[(0,t.jsx)(d.r7,{children:"Sign Out"}),(0,t.jsx)(d.$v,{children:"Are you sure you want to sign out? You'll need to sign in again to access the management panel."})]}),(0,t.jsxs)(d.ck,{children:[(0,t.jsx)(d.Zr,{children:"Cancel"}),(0,t.jsx)(d.Rx,{onClick:I,className:"bg-destructive text-destructive-foreground",children:"Sign Out"})]})]})]})})]})]})}):(0,t.jsx)(r.A,{children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(y,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading account information..."})]})})})}},54416:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},58417:(e,s,a)=>{Promise.resolve().then(a.bind(a,54144))},75525:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},99840:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>u,Es:()=>x,L3:()=>m,c7:()=>h,lG:()=>l,rr:()=>p,zM:()=>i});var t=a(95155);a(12115);var r=a(15452),n=a(54416),c=a(53999);function l(e){let{...s}=e;return(0,t.jsx)(r.bL,{"data-slot":"dialog",...s})}function i(e){let{...s}=e;return(0,t.jsx)(r.l9,{"data-slot":"dialog-trigger",...s})}function d(e){let{...s}=e;return(0,t.jsx)(r.ZL,{"data-slot":"dialog-portal",...s})}function o(e){let{className:s,...a}=e;return(0,t.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,c.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function u(e){let{className:s,children:a,showCloseButton:l=!0,...i}=e;return(0,t.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,t.jsx)(o,{}),(0,t.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,c.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...i,children:[a,l&&(0,t.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(n.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function h(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,c.cn)("flex flex-col gap-2 text-center sm:text-left",s),...a})}function x(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,c.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function m(e){let{className:s,...a}=e;return(0,t.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,c.cn)("text-lg leading-none font-semibold",s),...a})}function p(e){let{className:s,...a}=e;return(0,t.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,c.cn)("text-muted-foreground text-sm",s),...a})}}},e=>{e.O(0,[135,965,72,822,649,44,441,964,358],()=>e(e.s=58417)),_N_E=e.O()}]);